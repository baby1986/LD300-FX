'use strict';var cov_14vo3vt9or=function(){var path='/home/chen/LD300-FX/src/lib/util/fetch.js',hash='1bb8c3286011920afe26be7e60f75e7b8fac3cbd',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/chen/LD300-FX/src/lib/util/fetch.js',statementMap:{'0':{start:{line:3,column:0},end:{line:5,column:3}},'1':{start:{line:6,column:0},end:{line:6,column:56}},'2':{start:{line:8,column:16},end:{line:8,column:56}},'3':{start:{line:10,column:16},end:{line:10,column:49}},'4':{start:{line:12,column:0},end:{line:12,column:26}},'5':{start:{line:14,column:17},end:{line:14,column:39}},'6':{start:{line:16,column:18},end:{line:16,column:52}},'7':{start:{line:18,column:39},end:{line:18,column:93}},'8':{start:{line:20,column:16},end:{line:59,column:1}},'9':{start:{line:21,column:18},end:{line:21,column:88}},'10':{start:{line:23,column:25},end:{line:25,column:6}},'11':{start:{line:26,column:4},end:{line:28,column:5}},'12':{start:{line:27,column:8},end:{line:27,column:63}},'13':{start:{line:29,column:4},end:{line:31,column:5}},'14':{start:{line:30,column:8},end:{line:30,column:64}},'15':{start:{line:33,column:4},end:{line:58,column:7}},'16':{start:{line:34,column:8},end:{line:41,column:11}},'17':{start:{line:35,column:12},end:{line:40,column:14}},'18':{start:{line:43,column:21},end:{line:43,column:32}},'19':{start:{line:44,column:25},end:{line:44,column:40}},'20':{start:{line:45,column:22},end:{line:45,column:34}},'21':{start:{line:46,column:19},end:{line:46,column:28}},'22':{start:{line:48,column:19},end:{line:48,column:25}},'23':{start:{line:49,column:8},end:{line:53,column:9}},'24':{start:{line:50,column:12},end:{line:50,column:36}},'25':{start:{line:54,column:8},end:{line:56,column:9}},'26':{start:{line:55,column:12},end:{line:55,column:103}},'27':{start:{line:57,column:8},end:{line:57,column:76}},'28':{start:{line:61,column:22},end:{line:65,column:1}},'29':{start:{line:62,column:4},end:{line:64,column:17}},'30':{start:{line:63,column:8},end:{line:63,column:66}}},fnMap:{'0':{name:'_interopRequireDefault',decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:37},end:{line:18,column:95}},line:18},'1':{name:'fetchJson',decl:{start:{line:20,column:45},end:{line:20,column:54}},loc:{start:{line:20,column:60},end:{line:59,column:1}},line:20},'2':{name:'(anonymous_2)',decl:{start:{line:33,column:93},end:{line:33,column:94}},loc:{start:{line:33,column:113},end:{line:42,column:5}},line:33},'3':{name:'(anonymous_3)',decl:{start:{line:34,column:36},end:{line:34,column:37}},loc:{start:{line:34,column:52},end:{line:41,column:9}},line:34},'4':{name:'(anonymous_4)',decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:28},end:{line:58,column:5}},line:42},'5':{name:'queryParameters',decl:{start:{line:61,column:57},end:{line:61,column:72}},loc:{start:{line:61,column:79},end:{line:65,column:1}},line:61},'6':{name:'(anonymous_6)',decl:{start:{line:62,column:33},end:{line:62,column:34}},loc:{start:{line:62,column:48},end:{line:64,column:5}},line:62}},branchMap:{'0':{loc:{start:{line:18,column:46},end:{line:18,column:92}},type:'cond-expr',locations:[{start:{line:18,column:70},end:{line:18,column:73}},{start:{line:18,column:76},end:{line:18,column:92}}],line:18},'1':{loc:{start:{line:18,column:46},end:{line:18,column:67}},type:'binary-expr',locations:[{start:{line:18,column:46},end:{line:18,column:49}},{start:{line:18,column:53},end:{line:18,column:67}}],line:18},'2':{loc:{start:{line:21,column:18},end:{line:21,column:88}},type:'cond-expr',locations:[{start:{line:21,column:71},end:{line:21,column:83}},{start:{line:21,column:86},end:{line:21,column:88}}],line:21},'3':{loc:{start:{line:21,column:18},end:{line:21,column:68}},type:'binary-expr',locations:[{start:{line:21,column:18},end:{line:21,column:38}},{start:{line:21,column:42},end:{line:21,column:68}}],line:21},'4':{loc:{start:{line:23,column:25},end:{line:25,column:6}},type:'binary-expr',locations:[{start:{line:23,column:25},end:{line:23,column:40}},{start:{line:23,column:44},end:{line:25,column:6}}],line:23},'5':{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:'if',locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:26,column:4},end:{line:28,column:5}}],line:26},'6':{loc:{start:{line:26,column:10},end:{line:26,column:69}},type:'binary-expr',locations:[{start:{line:26,column:10},end:{line:26,column:17}},{start:{line:26,column:21},end:{line:26,column:33}},{start:{line:26,column:37},end:{line:26,column:69}}],line:26},'7':{loc:{start:{line:29,column:4},end:{line:31,column:5}},type:'if',locations:[{start:{line:29,column:4},end:{line:31,column:5}},{start:{line:29,column:4},end:{line:31,column:5}}],line:29},'8':{loc:{start:{line:29,column:8},end:{line:29,column:72}},type:'binary-expr',locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:24},end:{line:29,column:50}},{start:{line:29,column:54},end:{line:29,column:72}}],line:29},'9':{loc:{start:{line:54,column:8},end:{line:56,column:9}},type:'if',locations:[{start:{line:54,column:8},end:{line:56,column:9}},{start:{line:54,column:8},end:{line:56,column:9}}],line:54},'10':{loc:{start:{line:54,column:12},end:{line:54,column:41}},type:'binary-expr',locations:[{start:{line:54,column:12},end:{line:54,column:24}},{start:{line:54,column:28},end:{line:54,column:41}}],line:54},'11':{loc:{start:{line:55,column:58},end:{line:55,column:92}},type:'binary-expr',locations:[{start:{line:55,column:58},end:{line:55,column:62}},{start:{line:55,column:66},end:{line:55,column:78}},{start:{line:55,column:82},end:{line:55,column:92}}],line:55}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0,0],'7':[0,0],'8':[0,0,0],'9':[0,0],'10':[0,0],'11':[0,0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_14vo3vt9or.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_14vo3vt9or.s[1]++;exports.queryParameters=exports.fetchJson=undefined;var _extends2=(cov_14vo3vt9or.s[2]++,require('babel-runtime/helpers/extends'));var _extends3=(cov_14vo3vt9or.s[3]++,_interopRequireDefault(_extends2));cov_14vo3vt9or.s[4]++;require('babel-polyfill');var _HttpError=(cov_14vo3vt9or.s[5]++,require('./HttpError'));var _HttpError2=(cov_14vo3vt9or.s[6]++,_interopRequireDefault(_HttpError));function _interopRequireDefault(obj){cov_14vo3vt9or.f[0]++;cov_14vo3vt9or.s[7]++;return(cov_14vo3vt9or.b[1][0]++,obj)&&(cov_14vo3vt9or.b[1][1]++,obj.__esModule)?(cov_14vo3vt9or.b[0][0]++,obj):(cov_14vo3vt9or.b[0][1]++,{default:obj});}var fetchJson=(cov_14vo3vt9or.s[8]++,exports.fetchJson=function fetchJson(url){cov_14vo3vt9or.f[1]++;var options=(cov_14vo3vt9or.s[9]++,(cov_14vo3vt9or.b[3][0]++,arguments.length>1)&&(cov_14vo3vt9or.b[3][1]++,arguments[1]!==undefined)?(cov_14vo3vt9or.b[2][0]++,arguments[1]):(cov_14vo3vt9or.b[2][1]++,{}));var requestHeaders=(cov_14vo3vt9or.s[10]++,(cov_14vo3vt9or.b[4][0]++,options.headers)||(cov_14vo3vt9or.b[4][1]++,new Headers({Accept:'application/json'})));cov_14vo3vt9or.s[11]++;if(!((cov_14vo3vt9or.b[6][0]++,options)&&(cov_14vo3vt9or.b[6][1]++,options.body)&&(cov_14vo3vt9or.b[6][2]++,options.body instanceof FormData))){cov_14vo3vt9or.b[5][0]++;cov_14vo3vt9or.s[12]++;requestHeaders.set('Content-Type','application/json');}else{cov_14vo3vt9or.b[5][1]++;}cov_14vo3vt9or.s[13]++;if((cov_14vo3vt9or.b[8][0]++,options.user)&&(cov_14vo3vt9or.b[8][1]++,options.user.authenticated)&&(cov_14vo3vt9or.b[8][2]++,options.user.token)){cov_14vo3vt9or.b[7][0]++;cov_14vo3vt9or.s[14]++;requestHeaders.set('Authorization',options.user.token);}else{cov_14vo3vt9or.b[7][1]++;}cov_14vo3vt9or.s[15]++;return fetch(url,(0,_extends3.default)({},options,{headers:requestHeaders})).then(function(response){cov_14vo3vt9or.f[2]++;cov_14vo3vt9or.s[16]++;return response.text().then(function(text){cov_14vo3vt9or.f[3]++;cov_14vo3vt9or.s[17]++;return{status:response.status,statusText:response.statusText,headers:response.headers,body:text};});}).then(function(_ref){cov_14vo3vt9or.f[4]++;var status=(cov_14vo3vt9or.s[18]++,_ref.status),statusText=(cov_14vo3vt9or.s[19]++,_ref.statusText),headers=(cov_14vo3vt9or.s[20]++,_ref.headers),body=(cov_14vo3vt9or.s[21]++,_ref.body);var json=(cov_14vo3vt9or.s[22]++,void 0);cov_14vo3vt9or.s[23]++;try{cov_14vo3vt9or.s[24]++;json=JSON.parse(body);}catch(e){// not json, no big deal
}cov_14vo3vt9or.s[25]++;if((cov_14vo3vt9or.b[10][0]++,status<200)||(cov_14vo3vt9or.b[10][1]++,status>=300)){cov_14vo3vt9or.b[9][0]++;cov_14vo3vt9or.s[26]++;return Promise.reject(new _HttpError2.default((cov_14vo3vt9or.b[11][0]++,json)&&(cov_14vo3vt9or.b[11][1]++,json.message)||(cov_14vo3vt9or.b[11][2]++,statusText),status));}else{cov_14vo3vt9or.b[9][1]++;}cov_14vo3vt9or.s[27]++;return{status:status,headers:headers,body:body,json:json};});});var queryParameters=(cov_14vo3vt9or.s[28]++,exports.queryParameters=function queryParameters(data){cov_14vo3vt9or.f[5]++;cov_14vo3vt9or.s[29]++;return Object.keys(data).map(function(key){cov_14vo3vt9or.f[6]++;cov_14vo3vt9or.s[30]++;return[key,data[key]].map(encodeURIComponent).join('=');}).join('&');});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoLmpzIl0sIm5hbWVzIjpbImZldGNoSnNvbiIsInVybCIsIm9wdGlvbnMiLCJyZXF1ZXN0SGVhZGVycyIsImhlYWRlcnMiLCJIZWFkZXJzIiwiQWNjZXB0IiwiYm9keSIsIkZvcm1EYXRhIiwic2V0IiwidXNlciIsImF1dGhlbnRpY2F0ZWQiLCJ0b2tlbiIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwiZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXNzYWdlIiwicXVlcnlQYXJhbWV0ZXJzIiwiT2JqZWN0Iiwia2V5cyIsImRhdGEiLCJtYXAiLCJrZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFTyxJQUNIQSxnQ0FBWSxTQUFaQSxTQUFZLENBQUNDLEdBQUQsRUFBdUI7QUFBQSxRQUFqQkMsT0FBaUIsdUVBQVAsRUFBTzs7QUFDbkMsUUFBTUMsaUJBQWlCRCxRQUFRRSxPQUFSLElBQW1CLElBQUlDLE9BQUosQ0FBWTtBQUNsREMsZ0JBQVE7QUFEMEMsS0FBWixDQUExQztBQUdBLFFBQUksRUFBRUosV0FBV0EsUUFBUUssSUFBbkIsSUFBMkJMLFFBQVFLLElBQVIsWUFBd0JDLFFBQXJELENBQUosRUFBb0U7QUFDaEVMLHVCQUFlTSxHQUFmLENBQW1CLGNBQW5CLEVBQW1DLGtCQUFuQztBQUNIO0FBQ0QsUUFBSVAsUUFBUVEsSUFBUixJQUFnQlIsUUFBUVEsSUFBUixDQUFhQyxhQUE3QixJQUE4Q1QsUUFBUVEsSUFBUixDQUFhRSxLQUEvRCxFQUFzRTtBQUNsRVQsdUJBQWVNLEdBQWYsQ0FBbUIsZUFBbkIsRUFBb0NQLFFBQVFRLElBQVIsQ0FBYUUsS0FBakQ7QUFDSDs7QUFFRCxXQUFPQyxNQUFNWixHQUFOLDZCQUFnQkMsT0FBaEIsSUFBeUJFLFNBQVNELGNBQWxDLEtBQ0ZXLElBREUsQ0FDRztBQUFBLGVBQVlDLFNBQVNDLElBQVQsR0FBZ0JGLElBQWhCLENBQXFCO0FBQUEsbUJBQVM7QUFDNUNHLHdCQUFRRixTQUFTRSxNQUQyQjtBQUU1Q0MsNEJBQVlILFNBQVNHLFVBRnVCO0FBRzVDZCx5QkFBU1csU0FBU1gsT0FIMEI7QUFJNUNHLHNCQUFNUztBQUpzQyxhQUFUO0FBQUEsU0FBckIsQ0FBWjtBQUFBLEtBREgsRUFPRkYsSUFQRSxDQU9HLGdCQUEyQztBQUFBLFlBQXhDRyxNQUF3QyxRQUF4Q0EsTUFBd0M7QUFBQSxZQUFoQ0MsVUFBZ0MsUUFBaENBLFVBQWdDO0FBQUEsWUFBcEJkLE9BQW9CLFFBQXBCQSxPQUFvQjtBQUFBLFlBQVhHLElBQVcsUUFBWEEsSUFBVzs7QUFDN0MsWUFBSVksYUFBSjtBQUNBLFlBQUk7QUFDQUEsbUJBQU9DLEtBQUtDLEtBQUwsQ0FBV2QsSUFBWCxDQUFQO0FBQ0gsU0FGRCxDQUVFLE9BQU9lLENBQVAsRUFBVTtBQUNSO0FBQ0g7QUFDRCxZQUFJTCxTQUFTLEdBQVQsSUFBZ0JBLFVBQVUsR0FBOUIsRUFBbUM7QUFDL0IsbUJBQU9NLFFBQVFDLE1BQVIsQ0FBZSx3QkFBZUwsUUFBUUEsS0FBS00sT0FBZCxJQUEwQlAsVUFBeEMsRUFBb0RELE1BQXBELENBQWYsQ0FBUDtBQUNIO0FBQ0QsZUFBTyxFQUFFQSxjQUFGLEVBQVViLGdCQUFWLEVBQW1CRyxVQUFuQixFQUF5QlksVUFBekIsRUFBUDtBQUNILEtBbEJFLENBQVA7QUFtQkgsQ0EvQk07O0FBaUNBLElBQU1PLDRDQUFrQixTQUFsQkEsZUFBa0I7QUFBQSxXQUFRQyxPQUFPQyxJQUFQLENBQVlDLElBQVosRUFDbENDLEdBRGtDLENBQzlCO0FBQUEsZUFBTyxDQUFDQyxHQUFELEVBQU1GLEtBQUtFLEdBQUwsQ0FBTixFQUFpQkQsR0FBakIsQ0FBcUJFLGtCQUFyQixFQUF5Q0MsSUFBekMsQ0FBOEMsR0FBOUMsQ0FBUDtBQUFBLEtBRDhCLEVBRWxDQSxJQUZrQyxDQUU3QixHQUY2QixDQUFSO0FBQUEsQ0FBeEIiLCJmaWxlIjoiZmV0Y2guanMiLCJzb3VyY2VSb290IjoiL2hvbWUvY2hlbi9MRDMwMC1GWC9zcmMvbGliL3V0aWwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2JhYmVsLXBvbHlmaWxsJ1xuaW1wb3J0IEh0dHBFcnJvciBmcm9tICcuL0h0dHBFcnJvcic7XG5cbmV4cG9ydCBjb25zdFxuICAgIGZldGNoSnNvbiA9ICh1cmwsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSk7XG4gICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLmJvZHkgJiYgb3B0aW9ucy5ib2R5IGluc3RhbmNlb2YgRm9ybURhdGEpKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudXNlciAmJiBvcHRpb25zLnVzZXIuYXV0aGVudGljYXRlZCAmJiBvcHRpb25zLnVzZXIudG9rZW4pIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgb3B0aW9ucy51c2VyLnRva2VuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7IC4uLm9wdGlvbnMsIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzIH0pXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKS50aGVuKHRleHQgPT4gKHtcbiAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiB0ZXh0LFxuICAgICAgICB9KSkpXG4gICAgICAgIC50aGVuKCh7IHN0YXR1cywgc3RhdHVzVGV4dCwgaGVhZGVycywgYm9keSB9KSA9PiB7XG4gICAgICAgICAgICBsZXQganNvbjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gbm90IGpzb24sIG5vIGJpZyBkZWFsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdHVzIDwgMjAwIHx8IHN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEh0dHBFcnJvcigoanNvbiAmJiBqc29uLm1lc3NhZ2UpIHx8IHN0YXR1c1RleHQsIHN0YXR1cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzLCBoZWFkZXJzLCBib2R5LCBqc29uIH07XG4gICAgICAgIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IGRhdGEgPT4gT2JqZWN0LmtleXMoZGF0YSlcbiAgICAubWFwKGtleSA9PiBba2V5LCBkYXRhW2tleV1dLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJz0nKSlcbiAgICAuam9pbignJicpO1xuIl19