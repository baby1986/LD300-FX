'use strict';var cov_vtc1xa0ow=function(){var path='/home/chen/ws_workspace/LD300-FX/src/util/fetch.js',hash='bcffd5e9b6dd52ad7d18bf4521051c57d9a1bf6f',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/chen/ws_workspace/LD300-FX/src/util/fetch.js',statementMap:{'0':{start:{line:3,column:0},end:{line:5,column:3}},'1':{start:{line:6,column:0},end:{line:6,column:56}},'2':{start:{line:8,column:16},end:{line:8,column:56}},'3':{start:{line:10,column:16},end:{line:10,column:49}},'4':{start:{line:12,column:0},end:{line:12,column:26}},'5':{start:{line:14,column:17},end:{line:14,column:39}},'6':{start:{line:16,column:18},end:{line:16,column:52}},'7':{start:{line:18,column:39},end:{line:18,column:93}},'8':{start:{line:20,column:16},end:{line:59,column:1}},'9':{start:{line:21,column:18},end:{line:21,column:88}},'10':{start:{line:23,column:25},end:{line:25,column:6}},'11':{start:{line:26,column:4},end:{line:28,column:5}},'12':{start:{line:27,column:8},end:{line:27,column:63}},'13':{start:{line:29,column:4},end:{line:31,column:5}},'14':{start:{line:30,column:8},end:{line:30,column:64}},'15':{start:{line:33,column:4},end:{line:58,column:7}},'16':{start:{line:34,column:8},end:{line:41,column:11}},'17':{start:{line:35,column:12},end:{line:40,column:14}},'18':{start:{line:43,column:21},end:{line:43,column:32}},'19':{start:{line:44,column:25},end:{line:44,column:40}},'20':{start:{line:45,column:22},end:{line:45,column:34}},'21':{start:{line:46,column:19},end:{line:46,column:28}},'22':{start:{line:48,column:19},end:{line:48,column:25}},'23':{start:{line:49,column:8},end:{line:53,column:9}},'24':{start:{line:50,column:12},end:{line:50,column:36}},'25':{start:{line:54,column:8},end:{line:56,column:9}},'26':{start:{line:55,column:12},end:{line:55,column:103}},'27':{start:{line:57,column:8},end:{line:57,column:76}},'28':{start:{line:61,column:22},end:{line:65,column:1}},'29':{start:{line:62,column:4},end:{line:64,column:17}},'30':{start:{line:63,column:8},end:{line:63,column:66}}},fnMap:{'0':{name:'_interopRequireDefault',decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:37},end:{line:18,column:95}},line:18},'1':{name:'fetchJson',decl:{start:{line:20,column:45},end:{line:20,column:54}},loc:{start:{line:20,column:60},end:{line:59,column:1}},line:20},'2':{name:'(anonymous_2)',decl:{start:{line:33,column:93},end:{line:33,column:94}},loc:{start:{line:33,column:113},end:{line:42,column:5}},line:33},'3':{name:'(anonymous_3)',decl:{start:{line:34,column:36},end:{line:34,column:37}},loc:{start:{line:34,column:52},end:{line:41,column:9}},line:34},'4':{name:'(anonymous_4)',decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:28},end:{line:58,column:5}},line:42},'5':{name:'queryParameters',decl:{start:{line:61,column:57},end:{line:61,column:72}},loc:{start:{line:61,column:79},end:{line:65,column:1}},line:61},'6':{name:'(anonymous_6)',decl:{start:{line:62,column:33},end:{line:62,column:34}},loc:{start:{line:62,column:48},end:{line:64,column:5}},line:62}},branchMap:{'0':{loc:{start:{line:18,column:46},end:{line:18,column:92}},type:'cond-expr',locations:[{start:{line:18,column:70},end:{line:18,column:73}},{start:{line:18,column:76},end:{line:18,column:92}}],line:18},'1':{loc:{start:{line:18,column:46},end:{line:18,column:67}},type:'binary-expr',locations:[{start:{line:18,column:46},end:{line:18,column:49}},{start:{line:18,column:53},end:{line:18,column:67}}],line:18},'2':{loc:{start:{line:21,column:18},end:{line:21,column:88}},type:'cond-expr',locations:[{start:{line:21,column:71},end:{line:21,column:83}},{start:{line:21,column:86},end:{line:21,column:88}}],line:21},'3':{loc:{start:{line:21,column:18},end:{line:21,column:68}},type:'binary-expr',locations:[{start:{line:21,column:18},end:{line:21,column:38}},{start:{line:21,column:42},end:{line:21,column:68}}],line:21},'4':{loc:{start:{line:23,column:25},end:{line:25,column:6}},type:'binary-expr',locations:[{start:{line:23,column:25},end:{line:23,column:40}},{start:{line:23,column:44},end:{line:25,column:6}}],line:23},'5':{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:'if',locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:26,column:4},end:{line:28,column:5}}],line:26},'6':{loc:{start:{line:26,column:10},end:{line:26,column:69}},type:'binary-expr',locations:[{start:{line:26,column:10},end:{line:26,column:17}},{start:{line:26,column:21},end:{line:26,column:33}},{start:{line:26,column:37},end:{line:26,column:69}}],line:26},'7':{loc:{start:{line:29,column:4},end:{line:31,column:5}},type:'if',locations:[{start:{line:29,column:4},end:{line:31,column:5}},{start:{line:29,column:4},end:{line:31,column:5}}],line:29},'8':{loc:{start:{line:29,column:8},end:{line:29,column:72}},type:'binary-expr',locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:24},end:{line:29,column:50}},{start:{line:29,column:54},end:{line:29,column:72}}],line:29},'9':{loc:{start:{line:54,column:8},end:{line:56,column:9}},type:'if',locations:[{start:{line:54,column:8},end:{line:56,column:9}},{start:{line:54,column:8},end:{line:56,column:9}}],line:54},'10':{loc:{start:{line:54,column:12},end:{line:54,column:41}},type:'binary-expr',locations:[{start:{line:54,column:12},end:{line:54,column:24}},{start:{line:54,column:28},end:{line:54,column:41}}],line:54},'11':{loc:{start:{line:55,column:58},end:{line:55,column:92}},type:'binary-expr',locations:[{start:{line:55,column:58},end:{line:55,column:62}},{start:{line:55,column:66},end:{line:55,column:78}},{start:{line:55,column:82},end:{line:55,column:92}}],line:55}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0,0],'7':[0,0],'8':[0,0,0],'9':[0,0],'10':[0,0],'11':[0,0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_vtc1xa0ow.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_vtc1xa0ow.s[1]++;exports.queryParameters=exports.fetchJson=undefined;var _extends2=(cov_vtc1xa0ow.s[2]++,require('babel-runtime/helpers/extends'));var _extends3=(cov_vtc1xa0ow.s[3]++,_interopRequireDefault(_extends2));cov_vtc1xa0ow.s[4]++;require('babel-polyfill');var _HttpError=(cov_vtc1xa0ow.s[5]++,require('./HttpError'));var _HttpError2=(cov_vtc1xa0ow.s[6]++,_interopRequireDefault(_HttpError));function _interopRequireDefault(obj){cov_vtc1xa0ow.f[0]++;cov_vtc1xa0ow.s[7]++;return(cov_vtc1xa0ow.b[1][0]++,obj)&&(cov_vtc1xa0ow.b[1][1]++,obj.__esModule)?(cov_vtc1xa0ow.b[0][0]++,obj):(cov_vtc1xa0ow.b[0][1]++,{default:obj});}var fetchJson=(cov_vtc1xa0ow.s[8]++,exports.fetchJson=function fetchJson(url){cov_vtc1xa0ow.f[1]++;var options=(cov_vtc1xa0ow.s[9]++,(cov_vtc1xa0ow.b[3][0]++,arguments.length>1)&&(cov_vtc1xa0ow.b[3][1]++,arguments[1]!==undefined)?(cov_vtc1xa0ow.b[2][0]++,arguments[1]):(cov_vtc1xa0ow.b[2][1]++,{}));var requestHeaders=(cov_vtc1xa0ow.s[10]++,(cov_vtc1xa0ow.b[4][0]++,options.headers)||(cov_vtc1xa0ow.b[4][1]++,new Headers({Accept:'application/json'})));cov_vtc1xa0ow.s[11]++;if(!((cov_vtc1xa0ow.b[6][0]++,options)&&(cov_vtc1xa0ow.b[6][1]++,options.body)&&(cov_vtc1xa0ow.b[6][2]++,options.body instanceof FormData))){cov_vtc1xa0ow.b[5][0]++;cov_vtc1xa0ow.s[12]++;requestHeaders.set('Content-Type','application/json');}else{cov_vtc1xa0ow.b[5][1]++;}cov_vtc1xa0ow.s[13]++;if((cov_vtc1xa0ow.b[8][0]++,options.user)&&(cov_vtc1xa0ow.b[8][1]++,options.user.authenticated)&&(cov_vtc1xa0ow.b[8][2]++,options.user.token)){cov_vtc1xa0ow.b[7][0]++;cov_vtc1xa0ow.s[14]++;requestHeaders.set('Authorization',options.user.token);}else{cov_vtc1xa0ow.b[7][1]++;}cov_vtc1xa0ow.s[15]++;return fetch(url,(0,_extends3.default)({},options,{headers:requestHeaders})).then(function(response){cov_vtc1xa0ow.f[2]++;cov_vtc1xa0ow.s[16]++;return response.text().then(function(text){cov_vtc1xa0ow.f[3]++;cov_vtc1xa0ow.s[17]++;return{status:response.status,statusText:response.statusText,headers:response.headers,body:text};});}).then(function(_ref){cov_vtc1xa0ow.f[4]++;var status=(cov_vtc1xa0ow.s[18]++,_ref.status),statusText=(cov_vtc1xa0ow.s[19]++,_ref.statusText),headers=(cov_vtc1xa0ow.s[20]++,_ref.headers),body=(cov_vtc1xa0ow.s[21]++,_ref.body);var json=(cov_vtc1xa0ow.s[22]++,void 0);cov_vtc1xa0ow.s[23]++;try{cov_vtc1xa0ow.s[24]++;json=JSON.parse(body);}catch(e){// not json, no big deal
}cov_vtc1xa0ow.s[25]++;if((cov_vtc1xa0ow.b[10][0]++,status<200)||(cov_vtc1xa0ow.b[10][1]++,status>=300)){cov_vtc1xa0ow.b[9][0]++;cov_vtc1xa0ow.s[26]++;return Promise.reject(new _HttpError2.default((cov_vtc1xa0ow.b[11][0]++,json)&&(cov_vtc1xa0ow.b[11][1]++,json.message)||(cov_vtc1xa0ow.b[11][2]++,statusText),status));}else{cov_vtc1xa0ow.b[9][1]++;}cov_vtc1xa0ow.s[27]++;return{status:status,headers:headers,body:body,json:json};});});var queryParameters=(cov_vtc1xa0ow.s[28]++,exports.queryParameters=function queryParameters(data){cov_vtc1xa0ow.f[5]++;cov_vtc1xa0ow.s[29]++;return Object.keys(data).map(function(key){cov_vtc1xa0ow.f[6]++;cov_vtc1xa0ow.s[30]++;return[key,data[key]].map(encodeURIComponent).join('=');}).join('&');});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoLmpzIl0sIm5hbWVzIjpbImZldGNoSnNvbiIsInVybCIsIm9wdGlvbnMiLCJyZXF1ZXN0SGVhZGVycyIsImhlYWRlcnMiLCJIZWFkZXJzIiwiQWNjZXB0IiwiYm9keSIsIkZvcm1EYXRhIiwic2V0IiwidXNlciIsImF1dGhlbnRpY2F0ZWQiLCJ0b2tlbiIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwiZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXNzYWdlIiwicXVlcnlQYXJhbWV0ZXJzIiwiT2JqZWN0Iiwia2V5cyIsImRhdGEiLCJtYXAiLCJrZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFTyxJQUFNQSxnQ0FBWSxTQUFaQSxTQUFZLENBQUNDLEdBQUQsRUFBdUI7QUFBQSxRQUFqQkMsT0FBaUIsdUVBQVAsRUFBTzs7QUFDNUMsUUFBTUMsaUJBQWlCRCxRQUFRRSxPQUFSLElBQW1CLElBQUlDLE9BQUosQ0FBWTtBQUNsREMsZ0JBQVE7QUFEMEMsS0FBWixDQUExQztBQUdBLFFBQUksRUFBRUosV0FBV0EsUUFBUUssSUFBbkIsSUFBMkJMLFFBQVFLLElBQVIsWUFBd0JDLFFBQXJELENBQUosRUFBb0U7QUFDaEVMLHVCQUFlTSxHQUFmLENBQW1CLGNBQW5CLEVBQW1DLGtCQUFuQztBQUNIO0FBQ0QsUUFBSVAsUUFBUVEsSUFBUixJQUFnQlIsUUFBUVEsSUFBUixDQUFhQyxhQUE3QixJQUE4Q1QsUUFBUVEsSUFBUixDQUFhRSxLQUEvRCxFQUFzRTtBQUNsRVQsdUJBQWVNLEdBQWYsQ0FBbUIsZUFBbkIsRUFBb0NQLFFBQVFRLElBQVIsQ0FBYUUsS0FBakQ7QUFDSDs7QUFFRCxXQUFPQyxNQUFNWixHQUFOLDZCQUFnQkMsT0FBaEIsSUFBeUJFLFNBQVNELGNBQWxDLEtBQ0ZXLElBREUsQ0FDRztBQUFBLGVBQVlDLFNBQVNDLElBQVQsR0FBZ0JGLElBQWhCLENBQXFCO0FBQUEsbUJBQVM7QUFDNUNHLHdCQUFRRixTQUFTRSxNQUQyQjtBQUU1Q0MsNEJBQVlILFNBQVNHLFVBRnVCO0FBRzVDZCx5QkFBU1csU0FBU1gsT0FIMEI7QUFJNUNHLHNCQUFNUztBQUpzQyxhQUFUO0FBQUEsU0FBckIsQ0FBWjtBQUFBLEtBREgsRUFPRkYsSUFQRSxDQU9HLGdCQUEyQztBQUFBLFlBQXhDRyxNQUF3QyxRQUF4Q0EsTUFBd0M7QUFBQSxZQUFoQ0MsVUFBZ0MsUUFBaENBLFVBQWdDO0FBQUEsWUFBcEJkLE9BQW9CLFFBQXBCQSxPQUFvQjtBQUFBLFlBQVhHLElBQVcsUUFBWEEsSUFBVzs7QUFDN0MsWUFBSVksYUFBSjtBQUNBLFlBQUk7QUFDQUEsbUJBQU9DLEtBQUtDLEtBQUwsQ0FBV2QsSUFBWCxDQUFQO0FBQ0gsU0FGRCxDQUVFLE9BQU9lLENBQVAsRUFBVTtBQUNSO0FBQ0g7QUFDRCxZQUFJTCxTQUFTLEdBQVQsSUFBZ0JBLFVBQVUsR0FBOUIsRUFBbUM7QUFDL0IsbUJBQU9NLFFBQVFDLE1BQVIsQ0FBZSx3QkFBZUwsUUFBUUEsS0FBS00sT0FBZCxJQUEwQlAsVUFBeEMsRUFBb0RELE1BQXBELENBQWYsQ0FBUDtBQUNIO0FBQ0QsZUFBTyxFQUFFQSxjQUFGLEVBQVViLGdCQUFWLEVBQW1CRyxVQUFuQixFQUF5QlksVUFBekIsRUFBUDtBQUNILEtBbEJFLENBQVA7QUFtQkgsQ0E5Qk07O0FBZ0NBLElBQU1PLDRDQUFrQixTQUFsQkEsZUFBa0I7QUFBQSxXQUFRQyxPQUFPQyxJQUFQLENBQVlDLElBQVosRUFDbENDLEdBRGtDLENBQzlCO0FBQUEsZUFBTyxDQUFDQyxHQUFELEVBQU1GLEtBQUtFLEdBQUwsQ0FBTixFQUFpQkQsR0FBakIsQ0FBcUJFLGtCQUFyQixFQUF5Q0MsSUFBekMsQ0FBOEMsR0FBOUMsQ0FBUDtBQUFBLEtBRDhCLEVBRWxDQSxJQUZrQyxDQUU3QixHQUY2QixDQUFSO0FBQUEsQ0FBeEIiLCJmaWxlIjoiZmV0Y2guanMiLCJzb3VyY2VSb290IjoiL2hvbWUvY2hlbi93c193b3Jrc3BhY2UvTEQzMDAtRlgvc3JjL3V0aWwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2JhYmVsLXBvbHlmaWxsJztcbmltcG9ydCBIdHRwRXJyb3IgZnJvbSAnLi9IdHRwRXJyb3InO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hKc29uID0gKHVybCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwgbmV3IEhlYWRlcnMoe1xuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9KTtcbiAgICBpZiAoIShvcHRpb25zICYmIG9wdGlvbnMuYm9keSAmJiBvcHRpb25zLmJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSkpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy51c2VyICYmIG9wdGlvbnMudXNlci5hdXRoZW50aWNhdGVkICYmIG9wdGlvbnMudXNlci50b2tlbikge1xuICAgICAgICByZXF1ZXN0SGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBvcHRpb25zLnVzZXIudG9rZW4pO1xuICAgIH1cblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHsgLi4ub3B0aW9ucywgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpLnRoZW4odGV4dCA9PiAoe1xuICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IHRleHQsXG4gICAgICAgIH0pKSlcbiAgICAgICAgLnRoZW4oKHsgc3RhdHVzLCBzdGF0dXNUZXh0LCBoZWFkZXJzLCBib2R5IH0pID0+IHtcbiAgICAgICAgICAgIGxldCBqc29uO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBub3QganNvbiwgbm8gYmlnIGRlYWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID49IDMwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgSHR0cEVycm9yKChqc29uICYmIGpzb24ubWVzc2FnZSkgfHwgc3RhdHVzVGV4dCwgc3RhdHVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXMsIGhlYWRlcnMsIGJvZHksIGpzb24gfTtcbiAgICAgICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gZGF0YSA9PiBPYmplY3Qua2V5cyhkYXRhKVxuICAgIC5tYXAoa2V5ID0+IFtrZXksIGRhdGFba2V5XV0ubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignPScpKVxuICAgIC5qb2luKCcmJyk7XG4iXX0=